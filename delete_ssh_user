#!/bin/bash

username="$1"

# Verifica se o usuário existe
if ! id "$username" &>/dev/null; then
    echo "User does not exist."
    exit 0
fi

# Verifica se o usuário está logado e derruba a sessão se estiver
if who | grep -q "^$username\b"; then
    echo "User is online. Terminating session..."
    pkill -KILL -u "$username"
fi

# Tenta deletar o usuário
if userdel "$username"; then
    echo "User deleted successfully."
else
    echo "Failed to delete user."
    exit 1
fi
